<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="public/trial.css" />
    <title>Questionnaire</title>
  </head>

  <body>
    <!-- Canvas Section -->
    <div class="container">
      <div class="outline">
        <div class="headline">
          <p>Please select a fitting canvas</p>
        </div>
        <div class="grid-container">
          <div id="rise" class="canvas-container">
            <canvas
              class="canvas"
              id="riseCanvas"
              width="200"
              height="200"
            ></canvas>
            <button class="button" onclick="buttonFunctions('rise')">
              Select
            </button>
          </div>
          <div id="fall" class="canvas-container">
            <canvas
              class="canvas"
              id="fallCanvas"
              width="200"
              height="200"
            ></canvas>
            <button class="button" onclick="buttonFunctions('fall')">
              Select
            </button>
          </div>
          <div id="olymp" class="canvas-container">
            <canvas
              class="canvas"
              id="olympCanvas"
              width="200"
              height="200"
            ></canvas>
            <button class="button" onclick="buttonFunctions('olymp')">
              Select
            </button>
          </div>
          <div id="tartarus" class="canvas-container">
            <canvas
              class="canvas"
              id="tartarusCanvas"
              width="200"
              height="200"
            ></canvas>
            <button class="button" onclick="buttonFunctions('tartarus')">
              Select
            </button>
          </div>
        </div>
      </div>
    </div>
    <section id="questionnaire" class="questionnaire">
      <!-- Intensity Section -->
      <div class="container">
        <div class="outline">
          <div class="headline">
            <p>Intensity</p>
          </div>
          <div class="slidecontainer">
            <input
              type="range"
              min="0"
              max="100"
              value="0"
              class="slider"
              id="intensity_slider"
            />
          </div>
          <button class="button" id="intensity_send">Enter</button>
          <button class="button" id="return">Go Back</button>
        </div>
      </div>

      <!-- Height Section -->
      <div class="container">
        <div class="outline">
          <div class="headline">
            <p>Height</p>
          </div>
          <div class="slidecontainer">
            <input
              type="range"
              min="0"
              max="100"
              value="0"
              class="slider"
              id="height_slider"
            />
          </div>
          <button class="button" id="height_send">Enter</button>
          <button class="button" id="return">Go Back</button>
        </div>
      </div>
    </section>

    <script>
      //Touch Screen lag when dragging slider
      let isDragging = false;

      const startDrag = (e) => {
        isDragging = true;
        updateSlider(e);
      };

      const endDrag = () => {
        isDragging = false;
      };

      const drag = (e) => {
        if (isDragging) {
          updateSlider(e);
        }
      };

      const updateSlider = (e) => {
        let clientX;
        if (e.touches) {
          clientX = e.touches[0].clientX;
        } else {
          clientX = e.clientX;
        }
        // Update slider position logic here using clientX
      };

      // Coordinates
      const canvasData = {
        rise: { x1: 150, y1: 150, x2: 150, y2: 50, x3: 50, y3: 150 },
        fall: { x1: 50, y1: 150, x2: 50, y2: 50, x3: 150, y3: 150 },
        olymp: { x1: 20, y1: 150, x2: 100, y2: 50, x3: 180, y3: 150 },
        tartarus: {
          x1: 20,
          y1: 50,
          x2: 20,
          y2: 150,
          x3: 180,
          y3: 150,
          x4: 180,
          y4: 50,
          x5: 100,
          y5: 120,
        },
      };

      // Functions that draw the forms
      function rise_and_fall(id, ctx) {
        const data = canvasData[id];
        ctx.clearRect(0, 0, 200, 200);
        ctx.beginPath();
        ctx.moveTo(data.x1, data.y1);
        ctx.lineTo(data.x2, data.y2);
        ctx.lineTo(data.x3, data.y3);
        ctx.closePath();
        ctx.stroke();

        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(data.x2, data.y2);
        ctx.lineTo(data.x3, data.y3);
        ctx.strokeStyle = "white";
        ctx.stroke();
      }

      function olymp(id, ctx) {
        const data = canvasData[id];
        ctx.clearRect(0, 0, 200, 200);
        ctx.beginPath();
        ctx.moveTo(data.x1, data.y1);
        ctx.lineTo(data.x2, data.y2);
        ctx.lineTo(data.x3, data.y3);
        ctx.closePath();
        ctx.stroke();

        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(data.x1, data.y1);
        ctx.lineTo(data.x2, data.y2);
        ctx.lineTo(data.x3, data.y3);
        ctx.strokeStyle = "white";
        ctx.stroke();
      }

      function tartarus(id, ctx) {
        const data = canvasData[id];
        ctx.clearRect(0, 0, 200, 200);
        ctx.beginPath();
        ctx.moveTo(data.x1, data.y1);
        ctx.lineTo(data.x2, data.y2);
        ctx.lineTo(data.x3, data.y3);
        ctx.lineTo(data.x4, data.y4);
        ctx.lineTo(data.x5, data.y5);
        ctx.closePath();
        ctx.stroke();

        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(data.x1, data.y1);
        ctx.lineTo(data.x5, data.y5);
        ctx.lineTo(data.x4, data.y4);
        ctx.strokeStyle = "white";
        ctx.stroke();
      }

      document.addEventListener("DOMContentLoaded", () => {
        Object.keys(canvasData).forEach((id) => {
          const canvas = document.getElementById(`${id}Canvas`);
          const ctx = canvas.getContext("2d");
          switch (id) {
            case "olymp":
              olymp(id, ctx);
              break;
            case "tartarus":
              tartarus(id, ctx);
              break;
            default:
              rise_and_fall(id, ctx);
          }
        });
      });

      let selectedCanvas = ""; // Variable to track the selected canvas
    </script>
  </body>
</html>
